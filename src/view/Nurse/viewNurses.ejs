<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>All Nurses</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/css/style.css" />
    <style>
        body {
            margin-top: 80px;
            padding-left: 260px;
            overflow-x: hidden;
        }

        #searchInput {
            max-width: 300px;
        }
    </style>
</head>

<body>

    <!-- Receptionist navbar and sidebar -->
    <%- include('../Reception/receptionNavbar') %>
        <%- include('../Reception/receptionSidebar') %>

            <div class="container">

                <!-- Title, Add button and Search in one row -->
                <div class="row mb-3 align-items-center">
                    <div class="col">
                        <h2 class="mb-0">All Nurses</h2>
                    </div>
                    <div class="col-auto">
                        <input type="text" id="searchInput" onkeyup="searchNurse()" class="form-control"
                            placeholder="Search nurse by name...">
                    </div>
                    <div class="col-auto">
                        <a href="add-nurse" class="btn btn-primary">+ Add Nurse</a>
                    </div>
                </div>

                <!-- Success / Error message -->
                <% if (typeof message !=='undefined' ) { %>
                    <div class="alert alert-<%= messageType === 'success' ? 'success' : 'danger' %> alert-dismissible fade show"
                        role="alert">
                        <%= message %>
                            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                    </div>
                    <% } %>

                        <!-- Nurses Table -->
                        <table class="table table-bordered table-hover shadow-sm">
                            <thead class="table-dark">
                                <tr>
                                    <th>Nurse Name</th>
                                    <th>Contact</th>
                                    <th>Shift</th>
                                    <th style="width: 160px;">Actions</th>
                                </tr>
                            </thead>
                            <tbody id="nurseTable">
                                <% nurses.forEach(nurse=> { %>
                                    <tr>
                                        <td>
                                            <%= nurse.nurse_name %>
                                        </td>
                                        <td>
                                            <%= nurse.nurse_contact %>
                                        </td>
                                        <td>
                                            <%= nurse.nurse_shift %>
                                        </td>
                                        <td>
                                            <a href="/nurse/update-nurse/<%= nurse.nurse_id %>"
                                                class="btn btn-sm btn-warning">Edit</a>
                                            <a href="/nurse/delete-nurse/<%= nurse.nurse_id %>"
                                                class="btn btn-sm btn-danger">Delete</a>
                                        </td>
                                    </tr>
                                    <% }) %>
                            </tbody>
                        </table>

            </div>

            <%- include('../fotter') %>

                <script>
                    function searchNurse() {
                        const input = document.getElementById("searchInput");
                        const filter = input.value.toLowerCase();
                        const table = document.getElementById("nurseTable");
                        const tr = table.getElementsByTagName("tr");

                        for (let i = 0; i < tr.length; i++) {
                            const td = tr[i].getElementsByTagName("td")[0];
                            if (td) {
                                const txtValue = td.textContent || td.innerText;
                                tr[i].style.display = txtValue.toLowerCase().includes(filter) ? "" : "none";
                            }
                        }
                    }
                </script>

                <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

</body>

</html>